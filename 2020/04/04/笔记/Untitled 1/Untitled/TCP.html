<h1 id="TCP协议"><a href="#TCP协议" class="headerlink" title="TCP协议"></a>TCP协议</h1><h1 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h1><p>Transmission Control Protocol</p>
<p><img src="TCP/Untitled.png" alt="TCP/Untitled.png"></p>
<h1 id="位置、组成"><a href="#位置、组成" class="headerlink" title="位置、组成"></a>位置、组成</h1><p><img src="TCP/Untitled%201.png" alt="TCP/Untitled%201.png"></p>
<h1 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h1><h2 id="1-TCP是-面向连接-的协议"><a href="#1-TCP是-面向连接-的协议" class="headerlink" title="1. TCP是**面向连接**的协议"></a>1. TCP是<code>**面向连接**</code>的协议</h2><h2 id="2-TCP的一个连接有两端（点对点服务）"><a href="#2-TCP的一个连接有两端（点对点服务）" class="headerlink" title="2. TCP的一个连接有两端（点对点服务）"></a>2. TCP的一个连接有两端（点对点服务）</h2><h2 id="3-TCP提供可靠的传输服务"><a href="#3-TCP提供可靠的传输服务" class="headerlink" title="3. TCP提供可靠的传输服务"></a>3. TCP提供可靠的传输服务</h2><h2 id="4-TCP协议提供全双工的通信"><a href="#4-TCP协议提供全双工的通信" class="headerlink" title="4. TCP协议提供全双工的通信"></a>4. TCP协议提供<code>全双工</code>的通信</h2><h2 id="5-TCP是面向字节流的协议"><a href="#5-TCP是面向字节流的协议" class="headerlink" title="5. TCP是面向字节流的协议"></a>5. TCP是面向<code>字节流</code>的协议</h2><p>TCP将数据报看成字节流，可能取出数据段的某一段传输，另一部分放在第二个数据报中传输</p>
<p><img src="TCP/Untitled%202.png" alt="TCP/Untitled%202.png"></p>
<h1 id="TCP协议的首部"><a href="#TCP协议的首部" class="headerlink" title="TCP协议的首部"></a>TCP协议的首部</h1><p><code>**固定**</code>20个字节</p>
<p>UDP 8个字节</p>
<p>IP协议，固定20个字节的长度</p>
<p><img src="TCP/Untitled%203.png" alt="TCP/Untitled%203.png"></p>
<h2 id="序号"><a href="#序号" class="headerlink" title="序号"></a>序号</h2><ul>
<li>范围0~ 2^32-1</li>
<li>一个字节一个序号</li>
<li>数据首字节序号</li>
</ul>
<p><img src="TCP/Untitled%204.png" alt="TCP/Untitled%204.png"></p>
<h2 id="确认号"><a href="#确认号" class="headerlink" title="确认号"></a>确认号</h2><ul>
<li>范围0~ 2^32-1</li>
<li>一个字节一个序号</li>
<li>期待收到的数据首字节序号</li>
<li>配合序号使用</li>
<li><strong>确认号为N，则表示N-1序号的数据都已收到</strong></li>
</ul>
<p><img src="TCP/Untitled%205.png" alt="TCP/Untitled%205.png"></p>
<h2 id="数据偏移"><a href="#数据偏移" class="headerlink" title="数据偏移"></a>数据偏移</h2><ul>
<li>占4位：0~15，单位是  32位字（每个偏移都可以表示4个字节的偏移）</li>
<li>数据偏离首部的距离——表达真实的数据偏离头部的位置</li>
<li>TCP数据报固定20字节，</li>
</ul>
<p>运算，15*4 = 60字节，TCP的长度可以为20-60字节</p>
<p><img src="TCP/Untitled%206.png" alt="TCP/Untitled%206.png"></p>
<h2 id="TCP标记"><a href="#TCP标记" class="headerlink" title="TCP标记"></a>TCP标记</h2><ul>
<li>占6位，每位都有不同的意义</li>
<li>URG <code>紧急位</code> URGENT =1 , 紧急数据</li>
<li>ACK <code>确认位</code> Acknowledgement=1，确认号才生效</li>
<li>PSH <code>推送位</code> Push=1，尽快把数据交付给应用层</li>
<li>RST <code>重置位</code> Reset =1, 重新建立连接</li>
<li>SYN <code>同步位</code> Synchronization =1 表示连接请求报文</li>
<li>FIN <code>终止位</code>  Finish =1 表示 释放连接</li>
</ul>
<p><img src="TCP/Untitled%207.png" alt="TCP/Untitled%207.png"></p>
<p><img src="TCP/Untitled%208.png" alt="TCP/Untitled%208.png"></p>
<h2 id="窗口"><a href="#窗口" class="headerlink" title="窗口"></a>窗口</h2><ul>
<li>占16位 ： 0~ 2^16-1</li>
<li>窗口指明允许对方发送的数据量</li>
</ul>
<p>与<code>确认号</code>结合，确认号是501，窗口是1000（对方可以发送1000个字节给我），意味着501-1500的长度的字节都可以接受？？</p>
<p><img src="TCP/Untitled%209.png" alt="TCP/Untitled%209.png"></p>
<h2 id="校验和"><a href="#校验和" class="headerlink" title="校验和"></a>校验和</h2><p>与UDP相同</p>
<h2 id="紧急指针"><a href="#紧急指针" class="headerlink" title="紧急指针"></a>紧急指针</h2><ul>
<li>紧急数据 <code>URG = 1</code></li>
<li>指定紧急数据在报文的位置</li>
</ul>
<p><img src="TCP/Untitled%2010.png" alt="TCP/Untitled%2010.png"></p>
<h2 id="TCP选项"><a href="#TCP选项" class="headerlink" title="TCP选项"></a>TCP选项</h2><ul>
<li><code>**最多**</code> 40 字节</li>
<li>支持未来的拓展</li>
</ul>
